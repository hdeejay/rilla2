{"ast":null,"code":"import LRUCache from \"mnemonist/lru-cache\";\nexport class EndpointCache {\n  constructor(capacity) {\n    this.cache = new LRUCache(capacity);\n  }\n  getEndpoint(key) {\n    const endpointsWithExpiry = this.get(key);\n    if (!endpointsWithExpiry || endpointsWithExpiry.length === 0) {\n      return undefined;\n    }\n    const endpoints = endpointsWithExpiry.map(endpoint => endpoint.Address);\n    return endpoints[Math.floor(Math.random() * endpoints.length)];\n  }\n  get(key) {\n    if (!this.has(key)) {\n      return;\n    }\n    const value = this.cache.get(key);\n    if (!value) {\n      return;\n    }\n    const now = Date.now();\n    const endpointsWithExpiry = value.filter(endpoint => now < endpoint.Expires);\n    if (endpointsWithExpiry.length === 0) {\n      this.delete(key);\n      return undefined;\n    }\n    return endpointsWithExpiry;\n  }\n  set(key, endpoints) {\n    const now = Date.now();\n    this.cache.set(key, endpoints.map(_ref => {\n      let {\n        Address,\n        CachePeriodInMinutes\n      } = _ref;\n      return {\n        Address,\n        Expires: now + CachePeriodInMinutes * 60 * 1000\n      };\n    }));\n  }\n  delete(key) {\n    this.cache.set(key, []);\n  }\n  has(key) {\n    if (!this.cache.has(key)) {\n      return false;\n    }\n    const endpoints = this.cache.peek(key);\n    if (!endpoints) {\n      return false;\n    }\n    return endpoints.length > 0;\n  }\n  clear() {\n    this.cache.clear();\n  }\n}","map":{"version":3,"names":["LRUCache","EndpointCache","constructor","capacity","cache","getEndpoint","key","endpointsWithExpiry","get","length","undefined","endpoints","map","endpoint","Address","Math","floor","random","has","value","now","Date","filter","Expires","delete","set","_ref","CachePeriodInMinutes","peek","clear"],"sources":["/Users/hamzahdeejay/Rilla-BackEnd/rilla-app/node_modules/@aws-sdk/endpoint-cache/dist-es/EndpointCache.js"],"sourcesContent":["import LRUCache from \"mnemonist/lru-cache\";\nexport class EndpointCache {\n    constructor(capacity) {\n        this.cache = new LRUCache(capacity);\n    }\n    getEndpoint(key) {\n        const endpointsWithExpiry = this.get(key);\n        if (!endpointsWithExpiry || endpointsWithExpiry.length === 0) {\n            return undefined;\n        }\n        const endpoints = endpointsWithExpiry.map((endpoint) => endpoint.Address);\n        return endpoints[Math.floor(Math.random() * endpoints.length)];\n    }\n    get(key) {\n        if (!this.has(key)) {\n            return;\n        }\n        const value = this.cache.get(key);\n        if (!value) {\n            return;\n        }\n        const now = Date.now();\n        const endpointsWithExpiry = value.filter((endpoint) => now < endpoint.Expires);\n        if (endpointsWithExpiry.length === 0) {\n            this.delete(key);\n            return undefined;\n        }\n        return endpointsWithExpiry;\n    }\n    set(key, endpoints) {\n        const now = Date.now();\n        this.cache.set(key, endpoints.map(({ Address, CachePeriodInMinutes }) => ({\n            Address,\n            Expires: now + CachePeriodInMinutes * 60 * 1000,\n        })));\n    }\n    delete(key) {\n        this.cache.set(key, []);\n    }\n    has(key) {\n        if (!this.cache.has(key)) {\n            return false;\n        }\n        const endpoints = this.cache.peek(key);\n        if (!endpoints) {\n            return false;\n        }\n        return endpoints.length > 0;\n    }\n    clear() {\n        this.cache.clear();\n    }\n}\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,qBAAqB;AAC1C,OAAO,MAAMC,aAAa,CAAC;EACvBC,WAAWA,CAACC,QAAQ,EAAE;IAClB,IAAI,CAACC,KAAK,GAAG,IAAIJ,QAAQ,CAACG,QAAQ,CAAC;EACvC;EACAE,WAAWA,CAACC,GAAG,EAAE;IACb,MAAMC,mBAAmB,GAAG,IAAI,CAACC,GAAG,CAACF,GAAG,CAAC;IACzC,IAAI,CAACC,mBAAmB,IAAIA,mBAAmB,CAACE,MAAM,KAAK,CAAC,EAAE;MAC1D,OAAOC,SAAS;IACpB;IACA,MAAMC,SAAS,GAAGJ,mBAAmB,CAACK,GAAG,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,OAAO,CAAC;IACzE,OAAOH,SAAS,CAACI,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGN,SAAS,CAACF,MAAM,CAAC,CAAC;EAClE;EACAD,GAAGA,CAACF,GAAG,EAAE;IACL,IAAI,CAAC,IAAI,CAACY,GAAG,CAACZ,GAAG,CAAC,EAAE;MAChB;IACJ;IACA,MAAMa,KAAK,GAAG,IAAI,CAACf,KAAK,CAACI,GAAG,CAACF,GAAG,CAAC;IACjC,IAAI,CAACa,KAAK,EAAE;MACR;IACJ;IACA,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;IACtB,MAAMb,mBAAmB,GAAGY,KAAK,CAACG,MAAM,CAAET,QAAQ,IAAKO,GAAG,GAAGP,QAAQ,CAACU,OAAO,CAAC;IAC9E,IAAIhB,mBAAmB,CAACE,MAAM,KAAK,CAAC,EAAE;MAClC,IAAI,CAACe,MAAM,CAAClB,GAAG,CAAC;MAChB,OAAOI,SAAS;IACpB;IACA,OAAOH,mBAAmB;EAC9B;EACAkB,GAAGA,CAACnB,GAAG,EAAEK,SAAS,EAAE;IAChB,MAAMS,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;IACtB,IAAI,CAAChB,KAAK,CAACqB,GAAG,CAACnB,GAAG,EAAEK,SAAS,CAACC,GAAG,CAACc,IAAA;MAAA,IAAC;QAAEZ,OAAO;QAAEa;MAAqB,CAAC,GAAAD,IAAA;MAAA,OAAM;QACtEZ,OAAO;QACPS,OAAO,EAAEH,GAAG,GAAGO,oBAAoB,GAAG,EAAE,GAAG;MAC/C,CAAC;IAAA,CAAC,CAAC,CAAC;EACR;EACAH,MAAMA,CAAClB,GAAG,EAAE;IACR,IAAI,CAACF,KAAK,CAACqB,GAAG,CAACnB,GAAG,EAAE,EAAE,CAAC;EAC3B;EACAY,GAAGA,CAACZ,GAAG,EAAE;IACL,IAAI,CAAC,IAAI,CAACF,KAAK,CAACc,GAAG,CAACZ,GAAG,CAAC,EAAE;MACtB,OAAO,KAAK;IAChB;IACA,MAAMK,SAAS,GAAG,IAAI,CAACP,KAAK,CAACwB,IAAI,CAACtB,GAAG,CAAC;IACtC,IAAI,CAACK,SAAS,EAAE;MACZ,OAAO,KAAK;IAChB;IACA,OAAOA,SAAS,CAACF,MAAM,GAAG,CAAC;EAC/B;EACAoB,KAAKA,CAAA,EAAG;IACJ,IAAI,CAACzB,KAAK,CAACyB,KAAK,CAAC,CAAC;EACtB;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}