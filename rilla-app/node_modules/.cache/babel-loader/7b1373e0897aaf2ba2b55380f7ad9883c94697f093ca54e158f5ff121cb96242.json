{"ast":null,"code":"import { doesIdentityRequireRefresh, isIdentityExpired, memoizeIdentityProvider, normalizeProvider } from \"@smithy/core\";\nimport { SignatureV4 } from \"@smithy/signature-v4\";\nexport const resolveAwsSdkSigV4Config = config => {\n  let normalizedCreds;\n  if (config.credentials) {\n    normalizedCreds = memoizeIdentityProvider(config.credentials, isIdentityExpired, doesIdentityRequireRefresh);\n  }\n  if (!normalizedCreds) {\n    if (config.credentialDefaultProvider) {\n      normalizedCreds = normalizeProvider(config.credentialDefaultProvider(Object.assign({}, config, {\n        parentClientConfig: config\n      })));\n    } else {\n      normalizedCreds = async () => {\n        throw new Error(\"`credentials` is missing\");\n      };\n    }\n  }\n  const {\n    signingEscapePath = true,\n    systemClockOffset = config.systemClockOffset || 0,\n    sha256\n  } = config;\n  let signer;\n  if (config.signer) {\n    signer = normalizeProvider(config.signer);\n  } else if (config.regionInfoProvider) {\n    signer = () => normalizeProvider(config.region)().then(async region => [(await config.regionInfoProvider(region, {\n      useFipsEndpoint: await config.useFipsEndpoint(),\n      useDualstackEndpoint: await config.useDualstackEndpoint()\n    })) || {}, region]).then(_ref => {\n      let [regionInfo, region] = _ref;\n      const {\n        signingRegion,\n        signingService\n      } = regionInfo;\n      config.signingRegion = config.signingRegion || signingRegion || region;\n      config.signingName = config.signingName || signingService || config.serviceId;\n      const params = {\n        ...config,\n        credentials: normalizedCreds,\n        region: config.signingRegion,\n        service: config.signingName,\n        sha256,\n        uriEscapePath: signingEscapePath\n      };\n      const SignerCtor = config.signerConstructor || SignatureV4;\n      return new SignerCtor(params);\n    });\n  } else {\n    signer = async authScheme => {\n      authScheme = Object.assign({}, {\n        name: \"sigv4\",\n        signingName: config.signingName || config.defaultSigningName,\n        signingRegion: await normalizeProvider(config.region)(),\n        properties: {}\n      }, authScheme);\n      const signingRegion = authScheme.signingRegion;\n      const signingService = authScheme.signingName;\n      config.signingRegion = config.signingRegion || signingRegion;\n      config.signingName = config.signingName || signingService || config.serviceId;\n      const params = {\n        ...config,\n        credentials: normalizedCreds,\n        region: config.signingRegion,\n        service: config.signingName,\n        sha256,\n        uriEscapePath: signingEscapePath\n      };\n      const SignerCtor = config.signerConstructor || SignatureV4;\n      return new SignerCtor(params);\n    };\n  }\n  return {\n    ...config,\n    systemClockOffset,\n    signingEscapePath,\n    credentials: normalizedCreds,\n    signer\n  };\n};\nexport const resolveAWSSDKSigV4Config = resolveAwsSdkSigV4Config;","map":{"version":3,"names":["doesIdentityRequireRefresh","isIdentityExpired","memoizeIdentityProvider","normalizeProvider","SignatureV4","resolveAwsSdkSigV4Config","config","normalizedCreds","credentials","credentialDefaultProvider","Object","assign","parentClientConfig","Error","signingEscapePath","systemClockOffset","sha256","signer","regionInfoProvider","region","then","useFipsEndpoint","useDualstackEndpoint","_ref","regionInfo","signingRegion","signingService","signingName","serviceId","params","service","uriEscapePath","SignerCtor","signerConstructor","authScheme","name","defaultSigningName","properties","resolveAWSSDKSigV4Config"],"sources":["/Users/hamzahdeejay/node_modules/@aws-sdk/core/dist-es/submodules/httpAuthSchemes/aws_sdk/resolveAwsSdkSigV4Config.js"],"sourcesContent":["import { doesIdentityRequireRefresh, isIdentityExpired, memoizeIdentityProvider, normalizeProvider, } from \"@smithy/core\";\nimport { SignatureV4 } from \"@smithy/signature-v4\";\nexport const resolveAwsSdkSigV4Config = (config) => {\n    let normalizedCreds;\n    if (config.credentials) {\n        normalizedCreds = memoizeIdentityProvider(config.credentials, isIdentityExpired, doesIdentityRequireRefresh);\n    }\n    if (!normalizedCreds) {\n        if (config.credentialDefaultProvider) {\n            normalizedCreds = normalizeProvider(config.credentialDefaultProvider(Object.assign({}, config, {\n                parentClientConfig: config,\n            })));\n        }\n        else {\n            normalizedCreds = async () => {\n                throw new Error(\"`credentials` is missing\");\n            };\n        }\n    }\n    const { signingEscapePath = true, systemClockOffset = config.systemClockOffset || 0, sha256, } = config;\n    let signer;\n    if (config.signer) {\n        signer = normalizeProvider(config.signer);\n    }\n    else if (config.regionInfoProvider) {\n        signer = () => normalizeProvider(config.region)()\n            .then(async (region) => [\n            (await config.regionInfoProvider(region, {\n                useFipsEndpoint: await config.useFipsEndpoint(),\n                useDualstackEndpoint: await config.useDualstackEndpoint(),\n            })) || {},\n            region,\n        ])\n            .then(([regionInfo, region]) => {\n            const { signingRegion, signingService } = regionInfo;\n            config.signingRegion = config.signingRegion || signingRegion || region;\n            config.signingName = config.signingName || signingService || config.serviceId;\n            const params = {\n                ...config,\n                credentials: normalizedCreds,\n                region: config.signingRegion,\n                service: config.signingName,\n                sha256,\n                uriEscapePath: signingEscapePath,\n            };\n            const SignerCtor = config.signerConstructor || SignatureV4;\n            return new SignerCtor(params);\n        });\n    }\n    else {\n        signer = async (authScheme) => {\n            authScheme = Object.assign({}, {\n                name: \"sigv4\",\n                signingName: config.signingName || config.defaultSigningName,\n                signingRegion: await normalizeProvider(config.region)(),\n                properties: {},\n            }, authScheme);\n            const signingRegion = authScheme.signingRegion;\n            const signingService = authScheme.signingName;\n            config.signingRegion = config.signingRegion || signingRegion;\n            config.signingName = config.signingName || signingService || config.serviceId;\n            const params = {\n                ...config,\n                credentials: normalizedCreds,\n                region: config.signingRegion,\n                service: config.signingName,\n                sha256,\n                uriEscapePath: signingEscapePath,\n            };\n            const SignerCtor = config.signerConstructor || SignatureV4;\n            return new SignerCtor(params);\n        };\n    }\n    return {\n        ...config,\n        systemClockOffset,\n        signingEscapePath,\n        credentials: normalizedCreds,\n        signer,\n    };\n};\nexport const resolveAWSSDKSigV4Config = resolveAwsSdkSigV4Config;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}